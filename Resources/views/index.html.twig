{% extends 'default/template/template.html.twig' %}

{% block title %}
    <i class="{{ include('@UserMessenger/_ico.html.twig', with_context = false) }}"></i>
    {{ 'title.user.message'|trans({}, 'user_messenger') }}
    <span class="badge badge-blue">
        XXXXXXX
    </span>
{% endblock %}

{% block content %}
    {% if conversations is not empty %}
        <div class="comments">
            {% set previous_date = null %}
            {% for conversation in conversations %}
                {{ include('@UserMessenger/_message.html.twig',
                    {
                        'conversation': conversation,
                        'message': conversation.last_message,
                        'previous_date': previous_date,
                    },
                    with_context = false
                ) }}
                {% set previous_date = conversation.last_message.createdAt|date('Ymd') %}
            {% endfor %}
        </div>
    {% else %}
        <div class="alert alert-danger mb-0">
            <p class="mb-0">
                {{ ('user.message.not_found')|trans({}, 'user_messenger') }}
            </p>
        </div>
    {% endif %}
{% endblock %}